/* C:\wamp64\www\pactopia360_erp\public\assets\client\css\sidebar.css */
/* ===== P360 · CLIENT · Sidebar (v1.3 · Clean SaaS · contraste real + sin rosa wash) ===== */

.sidebar[data-component="p360-sidebar"]{
  --brand: var(--p360-brand, #E11D48);
  --brand-600: var(--p360-brand-600, #BE123C);

  /* LIGHT */
  --panel: #ffffff;
  --ink: #0f172a;                 /* alto contraste */
  --mut: #475569;                 /* legible */
  --mut-2: #64748b;
  --bd: rgba(15, 23, 42, .10);
  --bd-2: rgba(15, 23, 42, .08);

  --hover: rgba(15, 23, 42, .04);
  --active-bg: rgba(225, 29, 72, .12);
  --active-bd: rgba(225, 29, 72, .26);

  --shadow: 0 16px 40px rgba(2, 6, 23, .10);

  /* SOT widths */
  --w: var(--sb-w, 260px);
  --w-mini: var(--sb-wc, 72px);

  width: var(--w);
  min-width: var(--w);

  display:flex;
  flex-direction:column;

  position: sticky;
  align-self: start;

  background: var(--panel);
  border-right: 1px solid var(--bd);

  transition: width .18s ease, min-width .18s ease;
}

/* DARK */
html[data-theme="dark"] .sidebar[data-component="p360-sidebar"],
html.theme-dark .sidebar[data-component="p360-sidebar"]{
  --panel: #0b1220;
  --ink: rgba(255,255,255,.94);
  --mut: rgba(255,255,255,.70);
  --mut-2: rgba(255,255,255,.55);
  --bd: rgba(255,255,255,.12);
  --bd-2: rgba(255,255,255,.08);

  --hover: rgba(255,255,255,.06);
  --active-bg: rgba(225, 29, 72, .22);
  --active-bd: rgba(225, 29, 72, .32);

  --shadow: 0 18px 44px rgba(0,0,0,.45);
}

/* Collapsed desktop */
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"]{
  width: var(--w-mini);
  min-width: var(--w-mini);
}

/* ===== Head ===== */
.sidebar[data-component="p360-sidebar"] .sidebar-head{
  height: 56px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;

  padding: 12px 12px;
  border-bottom: 1px solid var(--bd);
  background: linear-gradient(180deg, rgba(15,23,42,.02), transparent);
  position: relative;
}

html[data-theme="dark"] .sidebar[data-component="p360-sidebar"] .sidebar-head,
html.theme-dark .sidebar[data-component="p360-sidebar"] .sidebar-head{
  background: linear-gradient(180deg, rgba(255,255,255,.05), transparent);
}

.sidebar[data-component="p360-sidebar"] .sb-title{
  font: 900 12px/1 'Poppins', system-ui, -apple-system, Segoe UI, Roboto;
  letter-spacing: .12em;
  color: var(--mut);
  text-transform: uppercase;
}

/* toggle */
.sidebar[data-component="p360-sidebar"] .sb-toggle{
  width: 38px;
  height: 34px;
  border-radius: 12px;

  border: 1px solid var(--bd);
  background: color-mix(in oklab, var(--panel) 92%, #fff);

  box-shadow: 0 8px 18px rgba(2, 6, 23, .10);
  cursor:pointer;

  display:flex;
  align-items:center;
  justify-content:center;

  transition: transform .12s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
}
.sidebar[data-component="p360-sidebar"] .sb-toggle:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--ink) 18%, var(--bd));
  box-shadow: 0 12px 26px rgba(2, 6, 23, .14);
}
.sidebar[data-component="p360-sidebar"] .sb-toggle::before{
  content:"";
  width: 18px;
  height: 12px;
  display:block;
  background:
    linear-gradient(currentColor, currentColor) 0 0 / 100% 2px no-repeat,
    linear-gradient(currentColor, currentColor) 0 50% / 72% 2px no-repeat,
    linear-gradient(currentColor, currentColor) 0 100% / 88% 2px no-repeat;
  color: var(--ink);
  opacity: .95;
}

/* Hide MENÚ title when collapsed */
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"] .sb-title{ display:none; }

/* ===== Scroll ===== */
.sidebar[data-component="p360-sidebar"] .sidebar-scroll{
  height: calc(100% - 56px);
  overflow:auto;
  padding: 12px 10px;
}

/* ===== Nav ===== */
.sidebar[data-component="p360-sidebar"] .nav{
  display:flex;
  flex-direction:column;
  gap: 12px;
}

/* Group header */
.sidebar[data-component="p360-sidebar"] .nav-title{
  display:flex;
  align-items:center;
  padding: 8px 10px;

  font: 900 11px/1 'Poppins', system-ui, -apple-system, Segoe UI, Roboto;
  letter-spacing: .14em;
  text-transform: uppercase;

  color: var(--mut);
}

/* ✅ Pill neutra (sin rosa), texto legible */
.sidebar[data-component="p360-sidebar"] .nav-title .pill{
  display:inline-flex;
  align-items:center;
  padding: 7px 10px;
  border-radius: 999px;

  border: 1px solid var(--bd-2);
  background: rgba(15,23,42,.03);

  color: var(--mut);
}

html[data-theme="dark"] .sidebar[data-component="p360-sidebar"] .nav-title .pill,
html.theme-dark .sidebar[data-component="p360-sidebar"] .nav-title .pill{
  background: rgba(255,255,255,.06);
}

/* Accordion */
.sidebar[data-component="p360-sidebar"] details.nav-acc{ margin:0; padding:0; }
.sidebar[data-component="p360-sidebar"] details.nav-acc > summary{ list-style:none; cursor:pointer; user-select:none; }
.sidebar[data-component="p360-sidebar"] details.nav-acc > summary::-webkit-details-marker{ display:none; }

.sidebar[data-component="p360-sidebar"] details.nav-acc > summary .pill{
  position: relative;
  padding-right: 30px;
}

/* caret */
.sidebar[data-component="p360-sidebar"] details.nav-acc > summary .pill::after{
  content:"";
  position:absolute;
  right: 10px;
  top: 50%;
  width: 10px;
  height: 10px;
  transform: translateY(-50%);
  opacity: .65;
  background:
    linear-gradient(currentColor, currentColor) 50% 35% / 10px 2px no-repeat,
    linear-gradient(currentColor, currentColor) 50% 65% / 10px 2px no-repeat;
}
.sidebar[data-component="p360-sidebar"] details.nav-acc[open] > summary .pill::after{
  opacity: .9;
  background: linear-gradient(currentColor, currentColor) 50% 50% / 10px 2px no-repeat;
}

/* Hide group titles when collapsed desktop */
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"] .nav-title{ display:none; }

/* ===== Items ===== */
.sidebar[data-component="p360-sidebar"] .tip{
  display:flex;
  align-items:center;
  gap: 12px;

  padding: 10px 12px;
  border-radius: 14px;

  text-decoration:none;
  color: var(--ink);

  border: 1px solid transparent;
  background: transparent;

  outline: 0;
  position: relative;
  isolation:isolate;

  transition: background .18s ease, border-color .18s ease, box-shadow .18s ease, transform .12s ease, opacity .18s ease;
}

/* left rail active */
.sidebar[data-component="p360-sidebar"] .tip::before{
  content:"";
  position:absolute;
  left: 7px;
  top: 10px;
  bottom: 10px;
  width: 3px;
  border-radius: 999px;
  background: linear-gradient(180deg, var(--brand), var(--brand-600));
  opacity: 0;
  transform: translateX(-4px);
  transition: opacity .18s ease, transform .18s ease;
}

.sidebar[data-component="p360-sidebar"] .tip:hover{
  transform: translateY(-1px);
  background: var(--hover);
  border-color: var(--bd-2);
  box-shadow: 0 10px 22px rgba(2, 6, 23, .10);
}

.sidebar[data-component="p360-sidebar"] .tip.active{
  border-color: var(--active-bd);
  background: var(--active-bg);
  box-shadow: 0 12px 26px rgba(2, 6, 23, .12);
}
.sidebar[data-component="p360-sidebar"] .tip.active::before{
  opacity: 1;
  transform: none;
}

/* Danger */
.sidebar[data-component="p360-sidebar"] .tip.danger{
  color: color-mix(in oklab, #b91c1c 88%, var(--ink));
}
.sidebar[data-component="p360-sidebar"] .tip.danger:hover{
  border-color: color-mix(in oklab, #b91c1c 26%, var(--bd));
  background: color-mix(in oklab, #b91c1c 6%, transparent);
}

/* Icons */
.sidebar[data-component="p360-sidebar"] .ico{
  width: 20px;
  height: 20px;
  flex: 0 0 20px;
  color: currentColor;
  opacity: .98;
  transition: transform .18s ease, opacity .18s ease;
}
.sidebar[data-component="p360-sidebar"] .tip:hover .ico{
  transform: translateY(-1px);
}

/* ===== Text (Label + Desc) ===== */
.sidebar[data-component="p360-sidebar"] .tip > .tx{
  flex: 1 1 auto;
  min-width: 0;

  /* layout real para label + desc */
  display:flex;
  flex-direction:column;
  gap: 2px;

  /* evita cortes raros */
  overflow:hidden;

  color: var(--ink);
}

/* label principal */
.sidebar[data-component="p360-sidebar"] .tip > .tx > .lbl{
  display:block;
  font: 750 14px/1.15 'Poppins', system-ui, -apple-system, Segoe UI, Roboto;
  color: var(--ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* descripción */
.sidebar[data-component="p360-sidebar"] .tip > .tx > .desc{
  display:block;
  font: 650 11px/1.15 'Poppins', system-ui, -apple-system, Segoe UI, Roboto;
  color: var(--mut-2);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  opacity: .95;
}

/* estados */
.sidebar[data-component="p360-sidebar"] .tip.active > .tx > .desc{
  color: var(--mut);
}
.sidebar[data-component="p360-sidebar"] .tip.is-disabled > .tx > .lbl,
.sidebar[data-component="p360-sidebar"] .tip.is-disabled > .tx > .desc{
  color: var(--mut);
  opacity: .85;
}


/* Lock */
.sidebar[data-component="p360-sidebar"] .lock{
  width: 26px;
  height: 26px;
  border-radius: 10px;
  flex: 0 0 26px;

  display:inline-flex;
  align-items:center;
  justify-content:center;

  border: 1px solid var(--bd-2);
  background: rgba(15,23,42,.03);
  color: var(--mut);
}
html[data-theme="dark"] .sidebar[data-component="p360-sidebar"] .lock,
html.theme-dark .sidebar[data-component="p360-sidebar"] .lock{
  background: rgba(255,255,255,.06);
}

.sidebar[data-component="p360-sidebar"] .tip.is-disabled{
  opacity: .55;
  cursor: not-allowed;
  pointer-events: none;
}

/* Collapsed desktop tweaks */
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"] .tx{ display:none; }
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"] .tip{ justify-content:center; }
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"] .lock{ display:none; }

/* ===== Mobile ===== */
@media (max-width: 1099.98px){
  .sidebar[data-component="p360-sidebar"]{
    position: fixed;
    left: 0;
    top: calc(var(--header-h, 64px) - var(--p360-rail-h, 2px));
    height: calc(100dvh - (var(--header-h, 64px) - var(--p360-rail-h, 2px)));
    z-index: 60;

    transform: translateX(-100%);
    transition: transform .22s ease;

    box-shadow: var(--shadow);
  }
  .sidebar[data-component="p360-sidebar"].open{
    transform: translateX(0);
  }

  /* móvil siempre texto */
  .sidebar[data-component="p360-sidebar"][data-state="collapsed"]{
    width: var(--w);
    min-width: var(--w);
  }
  .sidebar[data-component="p360-sidebar"][data-state="collapsed"] .tx{ display:inline-block; }
  .sidebar[data-component="p360-sidebar"][data-state="collapsed"] .tip{ justify-content:flex-start; }
}

/* Brand rail discreto */
.sidebar[data-component="p360-sidebar"].skin-brand-rail{ position: relative; }
.sidebar[data-component="p360-sidebar"].skin-brand-rail::after{
  content:"";
  position:absolute;
  top:0;
  right:0;
  bottom:0;
  width: 2px;
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--brand) 55%, transparent),
    color-mix(in oklab, var(--brand) 12%, transparent)
  );
  pointer-events:none;
  opacity: .55;
}

/* Hard guarantee */
.sidebar[data-component="p360-sidebar"][data-state="expanded"] .tx{ display:inline-block !important; }
.sidebar[data-component="p360-sidebar"][data-state="expanded"] .nav-title{ display:flex !important; }
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"] .tx{ display:none !important; }
.sidebar[data-component="p360-sidebar"]:not(.is-mobile)[data-state="collapsed"] .nav-title{ display:none !important; }


/* ===================================================================
   P360 FIX (FORCE TEXT ON EXPANDED)
   - En tu screenshot está expanded pero .tx no aparece => algún CSS pisa
   - Esto lo corrige sí o sí.
   =================================================================== */

/* Siempre muestra labels en expanded (desktop y mobile) */
.sidebar[data-component="p360-sidebar"][data-state="expanded"] .tip .tx{
  display:inline-block !important;
  visibility:visible !important;
  opacity:1 !important;
  width:auto !important;
  height:auto !important;
  max-width: none !important;
}

/* Asegura que el layout del tip deje espacio para texto */
.sidebar[data-component="p360-sidebar"][data-state="expanded"] .tip{
  justify-content:flex-start !important;
}

/* También asegura títulos de grupo */
.sidebar[data-component="p360-sidebar"][data-state="expanded"] .nav-title{
  display:flex !important;
  visibility:visible !important;
  opacity:1 !important;
}

/* Solo ocultar labels cuando esté collapsed en desktop */
@media (min-width:1100px){
  .sidebar[data-component="p360-sidebar"][data-state="collapsed"] .tip .tx{
    display:none !important;
  }
}

/* ==========================================================
   P360 NUCLEAR FIX: en EXPANDED siempre se ve label+desc
   (gana contra cualquier CSS global tipo .tx{display:none})
   ========================================================== */

.sidebar[data-component="p360-sidebar"][data-state="expanded"] a.tip > .tx,
.sidebar[data-component="p360-sidebar"][data-state="expanded"] button.tip > .tx{
  display:flex !important;
  visibility:visible !important;
  opacity:1 !important;
  width:auto !important;
  height:auto !important;
  max-width:none !important;
  pointer-events:auto !important;
}

.sidebar[data-component="p360-sidebar"][data-state="expanded"] a.tip > .tx > .lbl,
.sidebar[data-component="p360-sidebar"][data-state="expanded"] button.tip > .tx > .lbl{
  display:block !important;
  visibility:visible !important;
  opacity:1 !important;
}

.sidebar[data-component="p360-sidebar"][data-state="expanded"] a.tip > .tx > .desc,
.sidebar[data-component="p360-sidebar"][data-state="expanded"] button.tip > .tx > .desc{
  display:block !important;
  visibility:visible !important;
  opacity:.95 !important;
}

/* Solo ocultar texto en COLLAPSED desktop */
@media (min-width:1100px){
  .sidebar[data-component="p360-sidebar"][data-state="collapsed"] a.tip > .tx,
  .sidebar[data-component="p360-sidebar"][data-state="collapsed"] button.tip > .tx{
    display:none !important;
  }
}
