/* ===== P360 · Usuarios (scope .usr-page) ===== */
.usr-page{ padding:16px; color:var(--text); background:var(--bg) }
.usr-page .usr-title{ margin:0; font-size:20px; font-weight:800 }
.usr-page .usr-header{ display:flex; justify-content:space-between; align-items:flex-start; gap:12px; margin-bottom:8px }
.usr-page .usr-counters{ display:flex; gap:8px; flex-wrap:wrap; margin-top:6px }
.usr-page .usr-kpi{ background: color-mix(in oklab, var(--text) 6%, transparent); color:var(--text); padding:6px 10px; border-radius:9999px; font-weight:700; font-size:12px }
.usr-page .usr-kpi.kpi-green{ background: color-mix(in oklab, var(--success) 20%, transparent) }
.usr-page .usr-kpi.kpi-red{ background: color-mix(in oklab, var(--danger) 20%, transparent) }
.usr-page .usr-kpi.kpi-violet{ background: color-mix(in oklab, var(--accent-2) 18%, transparent) }
.usr-page .usr-kpi.kpi-cyan{ background: color-mix(in oklab, var(--accent-3) 18%, transparent) }
.usr-page .usr-kpi.kpi-amber{ background: color-mix(in oklab, var(--warning) 22%, transparent) }

/* Tarjetas */
.usr-page .usr-card{
  background:var(--card-bg); border:1px solid var(--card-border); border-radius:12px; padding:12px;
  box-shadow:0 6px 18px rgba(0,0,0,.12); max-width:1400px; margin-inline:auto;
}

/* Filtros */
.usr-page .usr-filters{ background:var(--card-bg); border:1px solid var(--card-border); border-radius:12px; padding:12px; box-shadow:0 6px 18px rgba(0,0,0,.08); max-width:1400px; margin-inline:auto; }
.usr-page .usr-filter-row{ display:grid; gap:8px; grid-template-columns: 1.2fr repeat(4, minmax(140px, .7fr)) auto; align-items:end }
@media (max-width:1100px){ .usr-page .usr-filter-row{ grid-template-columns: 1fr 1fr 1fr } }
@media (max-width:640px){ .usr-page .usr-filter-row{ grid-template-columns: 1fr } }
.usr-page .usr-filter-row .lbl{ font-size:12px; color:var(--muted) }

.usr-page .usr-filters input[type="search"],
.usr-page .usr-filters select{
  min-height:36px; padding:8px 10px; border:1px solid var(--card-border); border-radius:10px; background:var(--card-bg); color:var(--text); font-size:14px
}
.usr-page .usr-filters-actions .btn{ min-height:36px; padding:8px 12px; font-weight:700 }

/* Botones (scoped) */
.usr-page .btn{ border:1px solid var(--card-border); background:var(--card-bg); color:var(--text); border-radius:10px; padding:8px 12px; cursor:pointer; font-size:14px; font-weight:700 }
.usr-page .btn:hover{ filter:brightness(1.06) }
.usr-page .btn-primary{ background:linear-gradient(135deg,var(--brand-red),color-mix(in oklab,var(--brand-red) 70%, black 30%)); color:#fff; border:0 }
.usr-page .btn-secondary{ background:var(--card-bg) }
.usr-page .btn-ghost{ background:transparent; border-color:transparent; color:var(--accent) }
.usr-page .btn-danger{ background:linear-gradient(135deg,#ef4444,color-mix(in oklab,#ef4444 65%, black 35%)); color:#fff; border:0 }
.usr-page .btn-small{ padding:6px 10px; font-size:12px; border-radius:8px }

/* Tabla */
.usr-page .usr-table-wrap{ overflow:auto }
.usr-page .usr-table{ width:100%; border-collapse:separate; border-spacing:0 }
.usr-page .usr-table th, .usr-page .usr-table td{ padding:10px; border-bottom:1px solid var(--card-border); white-space:nowrap; color:var(--text) }
.usr-page .usr-table thead th{ position:sticky; top:0; background:var(--card-bg); z-index:1; font-weight:800; color:var(--muted); text-align:left }
.usr-page .usr-table tbody tr:nth-child(odd){ background: color-mix(in oklab, var(--text) 3%, transparent) }
html.theme-dark .usr-page .usr-table tbody tr:nth-child(odd){ background: color-mix(in oklab, #000 12%, transparent) }
.usr-page .usr-table tbody tr:hover{ background: color-mix(in oklab, var(--accent) 9%, transparent) }
.usr-page .usr-sort{ color:var(--text); text-decoration:none; font-weight:800 }
.usr-page .usr-sort:hover{ text-decoration:underline }
.usr-page .usr-col-select{ width:36px }
.usr-page .usr-actions{ min-width:160px }

/* Chips / Badges */
.usr-page .usr-badge{
  display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:9999px;
  background: color-mix(in oklab, var(--accent) 16%, transparent); color:#fff; font-size:12px; font-weight:800;
}
.usr-page .usr-role-ventas{ background: color-mix(in oklab, var(--accent-3) 24%, transparent) }
.usr-page .usr-role-soporte{ background: color-mix(in oklab, var(--accent-2) 24%, transparent) }

.usr-page .chip-toggle{
  border:1px solid var(--card-border); background:var(--card-bg); color:var(--text);
  padding:4px 10px; border-radius:9999px; font-size:12px; font-weight:800; cursor:pointer;
}
.usr-page .chip-toggle.on{ background: color-mix(in oklab, var(--success) 22%, transparent); color:#064e3b; border-color: transparent }
.usr-page .chip-toggle.off{ background: color-mix(in oklab, var(--danger) 22%, transparent); color:#7f1d1d; border-color: transparent }
.usr-page .chip-toggle.warn.on{ background: color-mix(in oklab, var(--warning) 28%, transparent); color:#7c2d12 }

.usr-page .usr-name-wrap{ display:flex; flex-direction:column }
.usr-page .usr-name-text{ font-weight:800; cursor:pointer }
.usr-page .usr-muted{ color:var(--muted) }
.usr-page .usr-email{ cursor:pointer }

/* Pie */
.usr-page .usr-table-foot{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding-top:8px }
.usr-page .usr-total{ font-size:12px; color:var(--muted) }

/* Toolbar de selección masiva */
.usr-page .usr-bulk{
  max-width:1400px; margin:0 auto 10px; display:flex; justify-content:space-between; align-items:center; gap:10px;
  background:var(--panel-bg); border:1px solid var(--card-border); border-radius:12px; padding:10px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}
.usr-page .usr-bulk-left, .usr-page .usr-bulk-right{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.usr-page .usr-bulk-count{ font-weight:800 }

/* Bot lateral (mini-bot) */
.usr-bot{ position:fixed; right:12px; bottom:12px; width:min(480px, 92vw); max-height:80vh; background:var(--card-bg);
  border:1px solid var(--card-border); border-radius:14px; box-shadow:0 16px 40px rgba(0,0,0,.25);
  display:none; flex-direction:column; overflow:hidden; z-index:70
}
.usr-bot[aria-hidden="false"]{ display:flex }
.usr-bot .bot-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding:10px 12px; border-bottom:1px solid var(--card-border) }
.usr-bot .bot-head .t{ font-weight:800 }
.usr-bot .bot-close{ border:1px solid var(--card-border); background:transparent; border-radius:8px; padding:4px 8px; cursor:pointer }
.usr-bot .bot-body{ padding:10px 12px; display:flex; flex-direction:column; gap:10px }
.usr-bot .bot-hint{ margin:0; color:var(--muted); font-size:12px }
.usr-bot .bot-quick{ display:flex; gap:8px; flex-wrap:wrap }
.usr-bot .bot-btn{ border:1px solid var(--card-border); background:var(--panel-bg); color:var(--text); border-radius:9999px; padding:6px 10px; font-weight:700; cursor:pointer }
.usr-bot .bot-input{ display:flex; gap:8px }
.usr-bot .bot-input input{ flex:1; min-height:36px; padding:8px 10px; border:1px solid var(--card-border); border-radius:8px; background:var(--card-bg); color:var(--text) }
.usr-bot .bot-input button{ min-height:36px; padding:8px 12px; border-radius:8px; border:1px solid var(--card-border); background:var(--card-bg) }
.usr-bot .bot-log{ border:1px solid var(--card-border); background:var(--panel-bg); border-radius:10px; min-height:90px; max-height:260px; overflow:auto; padding:8px; font:12px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace }
.usr-bot .bot-log .ok{ color:var(--success) }
.usr-bot .bot-log .info{ color:var(--info) }
.usr-bot .bot-log .warn{ color:var(--warning) }
.usr-bot .bot-log .err{ color:var(--danger) }

@media (prefers-reduced-motion: reduce){ *{ animation:none!important; transition:none!important } }
