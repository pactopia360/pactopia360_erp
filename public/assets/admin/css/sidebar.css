/* C:\wamp64\www\pactopia360_erp\public\assets\admin\css\sidebar.css */
/* ===== P360 · Admin · sidebar.css (v2.0 · LEGACY SAFE) =====
   IMPORTANTE:
   - Tu Admin actual usa Nebula (#nebula-sidebar + .ns-*) desde Blade.
   - Este archivo existe por compat con pantallas antiguas que usen `.sidebar`.
   - Para NO romper Nebula ni el layout, aquí:
     1) encapsulamos TODO bajo: html[data-sidebar-legacy="1"]
     2) no tocamos main/admin-content ni offsets
     3) evitamos z-index agresivos y overlays que bloqueen clicks
   Para activar este sidebar legacy en una vista:
     <html data-sidebar-legacy="1">
   (o desde admin.blade.php si realmente lo necesitas)
   ======================================================================= */

/* ================= BRAND P360 ================= */
html[data-sidebar-legacy="1"] .sidebar{
  --brand: var(--p360-brand, #E11D48);
  --brand-600: var(--p360-brand-600, #BE123C);
  --brand-700: #9F1239;
  --brand-soft: color-mix(in oklab, var(--brand) 12%, transparent);

  --ink: var(--c-fg, #0f172a);
  --ink-weak: color-mix(in oklab, var(--ink) 45%, transparent);

  --card: var(--card, #fff);
  --bd: var(--bd, #e5e7eb);

  --shadow-lg: 0 10px 30px rgba(0,0,0,.15);
}

html[data-sidebar-legacy="1"].theme-dark .sidebar,
html[data-sidebar-legacy="1"][data-theme="dark"] .sidebar{
  --ink:#e5e7eb;
  --ink-weak: color-mix(in oklab, #fff 55%, transparent);
  --card: color-mix(in oklab, #0b1220 86%, transparent);
  --bd: rgba(255,255,255,.12);
  --brand-soft: color-mix(in oklab, var(--brand) 22%, transparent);
}

/* ==== Layout base ==== */
html[data-sidebar-legacy="1"] .sidebar{
  --w:260px;
  --w-mini:68px;

  background:
    radial-gradient(140px 60px at -20% 0%, color-mix(in oklab, var(--brand) 10%, transparent), transparent),
    linear-gradient(180deg, transparent, transparent);

  border-right:1px solid var(--bd);

  width:var(--w);
  min-width:var(--w);

  top: calc(var(--header-h, 56px) - var(--p360-rail-h, 2px));
  height: calc(100dvh - var(--header-h, 56px) + var(--p360-rail-h, 2px));

  /* Legacy sidebar se pensó sticky; lo mantenemos pero sin romper layout */
  position: sticky;
  align-self: start;

  transition: width .18s ease;

  display:flex;
  flex-direction:column;

  /* no bloquear clicks de otros elementos por overlays raros */
  z-index: 10;
}

html[data-sidebar-legacy="1"] .sidebar[data-state="collapsed"]{
  width:var(--w-mini);
  min-width:var(--w-mini);
}

html[data-sidebar-legacy="1"] .sidebar-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  height:50px;
  padding:10px 12px;
  border-bottom:1px solid var(--bd);
  background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 6%, transparent), transparent);
  position:relative;
}

html[data-sidebar-legacy="1"] .sidebar-head::after{
  content:'';
  position:absolute;
  left:10px;
  right:10px;
  bottom:-1px;
  height:1px;
  background: linear-gradient(90deg, transparent, color-mix(in oklab, var(--brand) 40%, transparent), transparent);
}

html[data-sidebar-legacy="1"] .sb-title{
  font:900 12px/1 Poppins, system-ui;
  letter-spacing:.08em;
  color:var(--ink-weak);
}

html[data-sidebar-legacy="1"] .sb-toggle{
  width:36px;
  height:32px;
  border:1px solid var(--bd);
  border-radius:10px;
  background:var(--card);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 2px 10px color-mix(in oklab, var(--brand) 12%, transparent);
}

html[data-sidebar-legacy="1"] .sb-toggle::before{
  content:'≡';
  font-size:18px;
  line-height:1;
  font-weight:900;
  transform:translateY(-1px);
  color:var(--ink);
}

html[data-sidebar-legacy="1"] .sidebar-scroll{
  height:calc(100% - 50px);
  overflow:auto;
  padding:14px;
}

html[data-sidebar-legacy="1"] .nav{
  display:flex;
  flex-direction:column;
  gap:18px;
}

html[data-sidebar-legacy="1"] .nav-group{
  display:grid;
  gap:8px;
}

html[data-sidebar-legacy="1"] .nav-title{
  font-weight:700;
  font-size:12px;
  letter-spacing:.04em;
  text-transform:uppercase;
  color:var(--ink-weak);
  padding:0 6px;
}

html[data-sidebar-legacy="1"] .nav-title .pill{
  display:inline-block;
  padding:6px 10px;
  border-radius:999px;
  background: linear-gradient(90deg, color-mix(in oklab, var(--brand) 16%, transparent), transparent);
  border:1px solid color-mix(in oklab, var(--brand) 18%, var(--bd));
}

/* ==== Ítems ==== */
html[data-sidebar-legacy="1"] .sidebar .tip{
  display:flex !important;
  align-items:center !important;
  gap:12px !important;
  padding:12px 12px !important;
  border-radius:14px !important;

  color:var(--ink) !important;
  text-decoration:none !important;

  border:1px solid transparent !important;
  background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 0%, transparent), transparent) !important;

  outline:0 !important;
  min-width:0;

  position:relative;
  isolation:isolate;

  transition:
    background .18s ease,
    border-color .18s ease,
    box-shadow .18s ease,
    transform .12s ease;
}

html[data-sidebar-legacy="1"] .sidebar .tip::before{
  content:'';
  position:absolute;
  left:6px;
  top:9px;
  bottom:9px;
  width:3px;
  border-radius:6px;
  background: linear-gradient(180deg, var(--brand), var(--brand-600));
  box-shadow:0 0 0 transparent;
  opacity:0;
  transform:translateX(-4px);
  transition:opacity .18s ease, transform .18s ease, box-shadow .18s ease;
}

html[data-sidebar-legacy="1"] .sidebar .tip:hover{
  background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 8%, transparent), transparent) !important;
  border-color: color-mix(in oklab, var(--brand) 22%, var(--bd)) !important;
  box-shadow: 0 6px 18px color-mix(in oklab, var(--brand) 12%, transparent);
  transform: translateY(-1px);
}

html[data-sidebar-legacy="1"] .sidebar .tip:hover::before{
  opacity:1;
  transform:none;
  box-shadow:0 0 16px color-mix(in oklab, var(--brand) 40%, transparent);
}

html[data-sidebar-legacy="1"] .sidebar .tip.active .ico{ color:var(--brand); }

html[data-sidebar-legacy="1"] .sidebar .tip.active::before{
  opacity:1;
  transform:none;
  box-shadow:0 0 18px color-mix(in oklab, var(--brand) 42%, transparent);
}

html[data-sidebar-legacy="1"] .sidebar .tip.danger{ color:#b91c1c; }

html[data-sidebar-legacy="1"] .sidebar .tip.danger:hover{
  border-color: color-mix(in oklab, #b91c1c 30%, var(--bd));
}

html[data-sidebar-legacy="1"] .sidebar .ico{
  width:20px;
  height:20px;
  color:currentColor;
  flex:0 0 20px !important;
  display:inline-block;
  filter: drop-shadow(0 0 0 transparent);
  transition: color .18s ease, filter .18s ease, transform .18s ease;
}

html[data-sidebar-legacy="1"] .sidebar .tip:hover .ico{
  transform: translateY(-1px);
  filter: drop-shadow(0 4px 10px color-mix(in oklab, var(--brand) 20%, transparent));
}

html[data-sidebar-legacy="1"] .sidebar .tx{
  display:inline-block !important;
  flex:1 1 auto !important;
  min-width:0 !important;
  white-space:nowrap !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  font:600 14px/1.15 Poppins, system-ui;
}

/* Oculta labels y títulos SOLO cuando está colapsado en desktop */
html[data-sidebar-legacy="1"] .sidebar:not(.is-mobile)[data-state="collapsed"] .tx{ display:none !important; }
html[data-sidebar-legacy="1"] .sidebar:not(.is-mobile)[data-state="collapsed"] .tip{ justify-content:center !important; }
html[data-sidebar-legacy="1"] .sidebar:not(.is-mobile)[data-state="collapsed"] .tip.active{ box-shadow:none; }
html[data-sidebar-legacy="1"] .sidebar:not(.is-mobile)[data-state="collapsed"] .sb-title{ display:none !important; }
html[data-sidebar-legacy="1"] .sidebar:not(.is-mobile)[data-state="collapsed"] .nav-title{ display:none !important; }

/* ===== Responsive (móvil) ===== */
@media (max-width:1099.98px){
  html[data-sidebar-legacy="1"] .sidebar{
    position:fixed;
    left:0;
    top: calc(var(--header-h, 56px) - var(--p360-rail-h, 2px));
    height: calc(100dvh - var(--header-h, 56px) + var(--p360-rail-h, 2px));

    /* z-index moderado (no tapar topbar/overlays del admin moderno) */
    z-index: 40;

    width:var(--w);
    min-width:var(--w);
    transform:translateX(-100%);
    transition:transform .22s ease;
    box-shadow:var(--shadow-lg);
  }
  html[data-sidebar-legacy="1"] .sidebar.open{ transform:translateX(0); }

  html[data-sidebar-legacy="1"] .sidebar[data-state="collapsed"] .tx{ display:inline-block !important; }
  html[data-sidebar-legacy="1"] .sidebar[data-state="collapsed"] .tip{ justify-content:flex-start !important; }
  html[data-sidebar-legacy="1"] .sidebar[data-state="collapsed"]{ width:var(--w); min-width:var(--w); }
}

/* ===== Separador lateral ===== */
html[data-sidebar-legacy="1"] .sidebar.skin-brand-rail{ position:relative; }

html[data-sidebar-legacy="1"] .sidebar.skin-brand-rail::after{
  content:"";
  position:absolute;
  top:0;
  right:0;
  bottom:0;
  width:2px;
  background: url("/assets/client/img/ui/sidebar-brand-rail.svg") repeat-y right top;
  pointer-events:none;
}

html[data-sidebar-legacy="1"].theme-dark .sidebar.skin-brand-rail::after,
html[data-sidebar-legacy="1"][data-theme="dark"] .sidebar.skin-brand-rail::after{
  filter: opacity(.8);
}
